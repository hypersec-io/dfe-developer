---
# Slack installation (Flatpak for Linux with GUI, Homebrew for macOS)

# Linux (Fedora/Ubuntu) - via Flatpak

- name: Install Slack via Flatpak (user-specific)
  community.general.flatpak:
    name: com.slack.Slack
    state: present
    method: user
  become: false
  become_user: "{{ dfe_actual_user }}"
  when:
    - ansible_distribution in ['Fedora', 'Ubuntu']
    - dfe_has_gnome

# macOS
- name: Install Slack via Homebrew Cask (macOS)
  community.general.homebrew_cask:
    name: slack
    state: present
  become: false
  environment: "{{ homebrew_cask_env }}"
  when: ansible_distribution == 'MacOSX'
