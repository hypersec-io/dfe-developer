---
# Ensure minimal GNOME desktop environment is installed (Linux only)
# Idempotent - does nothing if full desktop already present

# ============================================================================
# FEDORA
# ============================================================================

- name: Install GNOME desktop (Fedora)
  ansible.builtin.dnf:
    name: '@gnome-desktop'
    state: present
  when: ansible_distribution == 'Fedora'

- name: Install LibreOffice (Fedora)
  ansible.builtin.dnf:
    name: '@libreoffice'
    state: present
  when: ansible_distribution == 'Fedora'

- name: Set default target to graphical (Fedora)
  ansible.builtin.command:
    cmd: systemctl set-default graphical.target
  changed_when: true
  when: ansible_distribution == 'Fedora'

# ============================================================================
# UBUNTU
# ============================================================================

- name: Install GNOME desktop (Ubuntu)
  ansible.builtin.apt:
    name: ubuntu-desktop-minimal
    state: present
  when: ansible_distribution == 'Ubuntu'

- name: Install LibreOffice (Ubuntu)
  ansible.builtin.apt:
    name: libreoffice
    state: present
  when: ansible_distribution == 'Ubuntu'

- name: Set default target to graphical (Ubuntu)
  ansible.builtin.command:
    cmd: systemctl set-default graphical.target
  changed_when: true
  when: ansible_distribution == 'Ubuntu'
